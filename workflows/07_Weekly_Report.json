{"name": "07_Weekly_Report_Final", "type": "n8n-workflow", "nodes": [{"id": "1", "name": "Weekly Trigger", "type": "n8n-nodes-base.cron", "parameters": {"timezone": "UTC", "triggerTimes": [{"mode": "weekly", "weekday": "monday", "hour": 9}]}}, {"id": "2", "name": "Read Logs (Google Sheets)", "type": "n8n-nodes-base.googleSheets", "parameters": {"operation": "read", "sheetId": "YOUR_SHEET_ID", "range": "Logs!A:Z"}}, {"id": "3", "name": "Generate Summary", "type": "n8n-nodes-base.function", "parameters": {"functionCode": "return [{summary: 'Weekly CX Intelligence Report generated.'}];"}}, {"id": "4", "name": "Send Slack Summary", "type": "n8n-nodes-base.slack", "parameters": {"operation": "postMessage", "channel": "#cx-alerts", "text": "Your weekly CX Intelligence report is ready."}}, {"parameters": {"functionCode": "\n// Check if logs were read, fallback if not\nconst logs = $json.logs;\nif (!logs || logs.length === 0) {\n  return [{ json: { fallback: true } }];\n}\nreturn [{ json: { fallback: false, logs } }];\n"}, "name": "Check Google Sheets Fallback", "type": "n8n-nodes-base.function", "typeVersion": 1, "position": [600, 300]}, {"parameters": {"functionCode": "\n// Simulate retry mechanism (basic counter or fallback to log)\nconst attempt = $json.retryCount || 0;\nif (attempt >= 2) {\n  throw new Error(\"Slack post failed after retries\");\n}\nreturn [{ json: { ...$json, retryCount: attempt + 1 } }];\n"}, "name": "Slack Retry Handler", "type": "n8n-nodes-base.function", "typeVersion": 1, "position": [1000, 300]}, {"parameters": {"values": {"string": [{"name": "workflow", "value": "07_Weekly_Report"}, {"name": "event", "value": "Report Attempted"}, {"name": "timestamp", "value": "2025-11-21T21:25:32.557127"}]}}, "name": "Log Report Outcome", "type": "n8n-nodes-base.set", "typeVersion": 1, "position": [1200, 300]}], "connections": {"1": {"main": [[{"node": "2"}]]}, "2": {"main": [[{"node": "3"}]]}, "3": {"main": [[{"node": "4"}]]}}}